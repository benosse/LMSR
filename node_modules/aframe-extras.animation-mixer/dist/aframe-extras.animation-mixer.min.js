!function i(t,e,n){function o(r,s){if(!e[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=e[r]={exports:{}};t[r][0].call(d.exports,function(i){var e=t[r][1][i];return o(e||i)},d,d.exports,i,t,e,n)}return e[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(i,t,e){AFRAME.registerComponent("animation-mixer",i("./tmp/aframe-extras.animation-mixer/index.js"))},{"./tmp/aframe-extras.animation-mixer/index.js":2}],2:[function(i,t,e){function n(i){return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}const o={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};t.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(o)},repetitions:{default:1/0,min:0},timeScale:{default:1}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];const i=this.el.getObject3D("mesh");i?this.load(i):this.el.addEventListener("model-loaded",i=>{this.load(i.detail.model)})},load:function(i){const t=this.el;this.model=i,this.mixer=new THREE.AnimationMixer(i),this.mixer.addEventListener("loop",i=>{t.emit("animation-loop",{action:i.action,loopDelta:i.loopDelta})}),this.mixer.addEventListener("finished",i=>{t.emit("animation-finished",{action:i.action,direction:i.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(i){if(!i)return;const t=this.data,e=AFRAME.utils.diff(t,i);if("clip"in e)return this.stopAction(),void(t.clip&&this.playAction());this.activeActions.forEach(i=>{"duration"in e&&t.duration&&i.setDuration(t.duration),"clampWhenFinished"in e&&(i.clampWhenFinished=t.clampWhenFinished),("loop"in e||"repetitions"in e)&&i.setLoop(o[t.loop],t.repetitions),"timeScale"in e&&i.setEffectiveTimeScale(t.timeScale)})},stopAction:function(){const i=this.data;for(let t=0;t<this.activeActions.length;t++)i.crossFadeDuration?this.activeActions[t].fadeOut(i.crossFadeDuration):this.activeActions[t].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;const i=this.model,t=this.data,e=i.animations||(i.geometry||{}).animations||[];if(!e.length)return;const a=function(i){return new RegExp("^"+i.split(/\*+/).map(n).join(".*")+"$")}(t.clip);for(let n,r=0;n=e[r];r++)if(n.name.match(a)){const e=this.mixer.clipAction(n,i);e.enabled=!0,e.clampWhenFinished=t.clampWhenFinished,t.duration&&e.setDuration(t.duration),1!==t.timeScale&&e.setEffectiveTimeScale(t.timeScale),e.setLoop(o[t.loop],t.repetitions).fadeIn(t.crossFadeDuration).play(),this.activeActions.push(e)}},tick:function(i,t){this.mixer&&!isNaN(t)&&this.mixer.update(t/1e3)}})},{}]},{},[1]);